"use strict";(()=>{var e={};e.id=642,e.ids=[642],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},4300:e=>{e.exports=require("buffer")},6113:e=>{e.exports=require("crypto")},2361:e=>{e.exports=require("events")},7147:e=>{e.exports=require("fs")},3685:e=>{e.exports=require("http")},5687:e=>{e.exports=require("https")},1808:e=>{e.exports=require("net")},2037:e=>{e.exports=require("os")},1017:e=>{e.exports=require("path")},5477:e=>{e.exports=require("punycode")},2781:e=>{e.exports=require("stream")},4404:e=>{e.exports=require("tls")},7310:e=>{e.exports=require("url")},3837:e=>{e.exports=require("util")},9796:e=>{e.exports=require("zlib")},7383:(e,r,t)=>{t.r(r),t.d(r,{originalPathname:()=>q,patchFetch:()=>b,requestAsyncStorage:()=>f,routeModule:()=>I,serverHooks:()=>h,staticGenerationAsyncStorage:()=>x});var i={};t.r(i),t.d(i,{POST:()=>g,requestBodyParsing:()=>d});var a=t(9303),s=t(8716),o=t(670),u=t(7070),n=t(3965),p=t(7608),l=t(2890),c=t(2814);let m=l({storage:l.memoryStorage()});(0,c.eI)("https://ubhawvhjtmupucogjads.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InViaGF3dmhqdG11cHVjb2dqYWRzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTU4Nzk4OTUsImV4cCI6MjAzMTQ1NTg5NX0.Wxf-zwHmP367Fm2mim0rQWO-wF2i_dKFfrtYNL-wEXM");let d=!1;async function g(e){return new Promise((r,t)=>{m.single("file")(e,{},async t=>{if(t)return console.error("Error uploading file:",t),r(u.NextResponse.json({error:"Error uploading file"},{status:400}));try{let t=await e.formData(),i=t.get("iDUser"),a=t.get("material"),s=t.get("caracteristicas"),o=t.get("email"),l=t.get("telefono"),c=t.get("file");console.log(c);let m=await (0,p.c)(c);if(!m)return r(u.NextResponse.json({error:"Error uploading image"},{status:400}));let d=await n._.material.create({data:{iDUser:parseInt(i),material:a,caracteristicas:s,email:o,telefono:l,fotoUrl:m}});r(u.NextResponse.json({message:d},{status:201}))}catch(e){console.error("Error creating material:",e),r(u.NextResponse.json({error:"Error creating material"},{status:400}))}})})}let I=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/materiales/crear/route",pathname:"/api/materiales/crear",filename:"route",bundlePath:"app/api/materiales/crear/route"},resolvedPagePath:"C:\\Users\\47575158\\Documents\\GitHub\\Segundeame\\Segundeame\\app\\api\\materiales\\crear\\route.js",nextConfigOutput:"",userland:i}),{requestAsyncStorage:f,staticGenerationAsyncStorage:x,serverHooks:h}=I,q="/api/materiales/crear/route";function b(){return(0,o.patchFetch)({serverHooks:h,staticGenerationAsyncStorage:x})}},3965:(e,r,t)=>{t.d(r,{_:()=>a});let i=require("@prisma/client"),a=globalThis.prisma||new i.PrismaClient},7608:(e,r,t)=>{t.d(r,{c:()=>a});let i=(0,t(2814).eI)("https://ubhawvhjtmupucogjads.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InViaGF3dmhqdG11cHVjb2dqYWRzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MTU4Nzk4OTUsImV4cCI6MjAzMTQ1NTg5NX0.Wxf-zwHmP367Fm2mim0rQWO-wF2i_dKFfrtYNL-wEXM");async function a(e){try{let r=`uploads/${e.name}`,{data:t,error:a}=await i.storage.from("fotos").upload(r,e.buffer,{contentType:e.mimetype,cacheControl:"3600",upsert:!1});if(a)return console.error("Error uploading file:",a),null;let{data:s}=i.storage.from("fotos").getPublicUrl(r);return s?.publicUrl}catch(e){return console.error("Error uploading file:",e),null}}}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),i=r.X(0,[948,972,478],()=>t(7383));module.exports=i})();